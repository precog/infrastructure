server {
       	listen 443 default;

        root /var/www/precogsite/current;
        index index.html index.htm;

	server_name www.precog.com *.precog.com;

	include redirects.d/staticsite.conf;

        ssl on;
        ssl_certificate /etc/nginx/ssl/precog.cert;
        ssl_certificate_key /etc/nginx/ssl/precog.key;
 
        #ssl_session_timeout 5m;
 
        #ssl_protocols SSLv3 TLSv1;
        ssl_ciphers ALL:!ADH:!EXPORT56:RC4+RSA:+HIGH:+MEDIUM:+LOW:+SSLv3:+EXP;
        ssl_prefer_server_ciphers on;
 
        # char set
        charset utf-8;

        location ~* \.(css|png|jpg|jpeg|gif|ico)$ {
                expires 14d;
        }

        location /apidocs {
                autoindex on;
                expires 7d;
                try_files $uri $uri/ $uri/index.html =404;
        }

        location / {
                expires 7d;
                try_files $uri $uri/ =404;
        }

	access_log  <%= node['nginx']['log_dir'] %>/ssl-precogsite-access.log;
	error_log  <%= node['nginx']['log_dir'] %>/ssl-precogsite-error.log;

        error_page 404 /site/404/index.html;

        # redirect server error pages to the static page /50x.html
        #
        #error_page 500 502 503 504 /50x.html;
        #location = /50x.html {
        #       root /usr/share/nginx/www;
        #}
}

